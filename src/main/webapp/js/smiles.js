var smiles = [{"sid":"1","code":":happy:","img":"a.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"2","code":":aws:","img":"awesome.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"3","code":":nc:","img":"nocomments.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"4","code":":manul:","img":"manul.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"5","code":":crazy:","img":"crazy.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"6","code":":cry:","img":"cry.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"7","code":":glory:","img":"glory.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"8","code":":kawai:","img":"kawai.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"9","code":":mee:","img":"mee.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"10","code":":omg:","img":"omg.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"11","code":":whut:","img":"mhu.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"12","code":":sad:","img":"sad.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"13","code":":spk:","img":"slowpoke.png?1","width":"29","height":"30","roles":[2],"private":false},{"sid":"14","code":":hmhm:","img":"2.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"15","code":":mad:","img":"mad.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"16","code":":angry:","img":"aangry.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"17","code":":xd:","img":"ii.png?1","width":"31","height":"30","roles":[2],"private":false},{"sid":"18","code":":huh:","img":"huh.png?1","width":"31","height":"30","roles":[2],"private":false},{"sid":"19","code":":tears:","img":"happycry.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"20","code":":notch:","img":"notch.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"21","code":":vaga:","img":"vaganych.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"22","code":":ra:","img":"ra.png?1","width":"31","height":"34","roles":[2],"private":false},{"sid":"23","code":":fp:","img":"facepalm.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"24","code":":neo:","img":"smith.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"25","code":":peka:","img":"mini-happy.png?3","width":"30","height":"30","roles":[2],"private":false},{"sid":"26","code":":trf:","img":"trollface.png?2","width":"31","height":"25","roles":[2],"private":false},{"sid":"27","code":":fu:","img":"fuuuu.png?3","width":"28","height":"30","roles":[2],"private":false},{"sid":"28","code":":why:","img":"why.png?1","width":"34","height":"30","roles":[2],"private":false},{"sid":"29","code":":yao:","img":"yao.png?1","width":"23","height":"30","roles":[2],"private":false},{"sid":"30","code":":fyeah:","img":"fyeah.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"31","code":":lucky:","img":"lol.png?3","width":"28","height":"30","roles":[2],"private":false},{"sid":"32","code":":okay:","img":"okay.png?2","width":"23","height":"30","roles":[2],"private":false},{"sid":"33","code":":alone:","img":"alone.png?2","width":"31","height":"30","roles":[2],"private":false},{"sid":"34","code":":joyful:","img":"ewbte.png?3","width":"28","height":"30","roles":[2],"private":false},{"sid":"35","code":":wtf:","img":"wtf.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"36","code":":danu:","img":"daladno.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"37","code":":gusta:","img":"megusta.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"38","code":":bm:","img":"bm.png?4","width":"52","height":"29","roles":[2],"private":false},{"sid":"39","code":":lol:","img":"loool.png?1","width":"25","height":"30","roles":[2],"private":false},{"sid":"40","code":":notbad:","img":"notbad.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"41","code":":rly:","img":"really.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"42","code":":ban:","img":"banan.png?1","width":"21","height":"30","roles":[2],"private":false},{"sid":"43","code":":cap:","img":"cap.png?1","width":"35","height":"25","roles":[2],"private":false},{"sid":"44","code":":br:","img":"br.png?1","width":"27","height":"30","roles":[2],"private":false},{"sid":"45","code":":fpl:","img":"leefacepalm.png?1","width":"26","height":"30","roles":[2],"private":false},{"sid":"46","code":":ht:","img":"heart.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"47","code":":adolf:","img":"adolf.png?2","width":"27","height":"33","roles":[2],"private":false},{"sid":"48","code":":bratok:","img":"bratok.png?1","width":"27","height":"33","roles":[2],"private":false},{"sid":"49","code":":strelok:","img":"strelok.png?1","width":"27","height":"30","roles":[2],"private":false},{"sid":"50","code":":white-ra:","img":"white-ra.png?1","width":"27","height":"33","roles":[2],"private":false},{"sid":"51","code":":dimaga:","img":"dimaga.png?1","width":"27","height":"33","roles":[2],"private":false},{"sid":"52","code":":bruce:","img":"bruce.png?1","width":"30","height":"33","roles":[2],"private":false},{"sid":"53","code":":jae:","img":"jaedong.png?1","width":"28","height":"33","roles":[2],"private":false},{"sid":"54","code":":flash:","img":"flash1.png?1","width":"28","height":"33","roles":[2],"private":false},{"sid":"55","code":":bisu:","img":"bisu.png?1","width":"26","height":"33","roles":[2],"private":false},{"sid":"56","code":":jangbi:","img":"jangbi.png?1","width":"27","height":"31","roles":[2],"private":false},{"sid":"57","code":":idra:","img":"idra.png?1","width":"28","height":"33","roles":[2],"private":false},{"sid":"58","code":":vdv:","img":"vitya.png?1","width":"23","height":"33","roles":[2],"private":false},{"sid":"59","code":":imba:","img":"djigurda.png?1","width":"30","height":"33","roles":[2],"private":false},{"sid":"60","code":":chuck:","img":"chan.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"61","code":":tgirl:","img":"brucelove.png?1","width":"26","height":"29","roles":[2],"private":false},{"sid":"62","code":":top1sng:","img":"happy.png?1","width":"23","height":"30","roles":[2],"private":false},{"sid":"63","code":":slavik:","img":"slavik.png?1","width":"25","height":"33","roles":[2],"private":false},{"sid":"64","code":":olsilove:","img":"olsilove.png?1","width":"26","height":"30","roles":[2],"private":false},{"sid":"65","code":":kas:","img":"kas.png?1","width":"24","height":"30","roles":[2],"private":false},{"sid":"66","code":":pool:","img":"pool.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"67","code":":ej:","img":"ejik.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"68","code":":mario:","img":"mario.png?1","width":"33","height":"30","roles":[2],"private":false},{"sid":"69","code":":tort:","img":"tort.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"70","code":":arni:","img":"terminator.png?1","width":"20","height":"30","roles":[2],"private":false},{"sid":"71","code":":crab:","img":"crab.png?1","width":"34","height":"30","roles":[2],"private":false},{"sid":"72","code":":hero:","img":"heroes3.png?1","width":"24","height":"28","roles":[2],"private":false},{"sid":"73","code":":mc:","img":"mine.png?1","width":"25","height":"25","roles":[2],"private":false},{"sid":"74","code":":osu:","img":"osu.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"75","code":":q3:","img":"q3.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"76","code":":tigra:","img":"tigrica.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"77","code":":volck:","img":"voOlchik1.png?1","width":"31","height":"31","roles":[2],"private":false},{"sid":"78","code":":hpeka:","img":"harupeka.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"79","code":":slow:","img":"spok.png?1","width":"29","height":"32","roles":[2],"private":false},{"sid":"80","code":":alex:","img":"alfi.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"81","code":":panda:","img":"panda.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"82","code":":sun:","img":"sunl.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"83","code":":cou:","img":"cougar.png?2","width":"30","height":"30","roles":[2],"private":false},{"sid":"84","code":":wb:","img":"wormban.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"85","code":":dobro:","img":"dobre.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"86","code":":theweedle:","img":"weedle.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"87","code":":apc:","img":"apochai.png?1","width":"26","height":"30","roles":[2],"private":false},{"sid":"88","code":":globus:","img":"globus.png?1","width":"30","height":"36","roles":[2],"private":false},{"sid":"89","code":":cow:","img":"cow.png?1","width":"30","height":"23","roles":[2],"private":false},{"sid":"90","code":":nook:","img":"no-okay.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"92","code":":fpd:","img":"fp.png?1","width":"43","height":"30","roles":[2],"private":false},{"sid":"93","code":":hg:","img":"hg.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"94","code":":yoko:","img":"yoko.png?1","width":"41","height":"30","roles":[2],"private":false},{"sid":"95","code":":miku:","img":"miku.png?1","width":"23","height":"30","roles":[2],"private":false},{"sid":"96","code":":winry:","img":"winry.png?1","width":"20","height":"30","roles":[2],"private":false},{"sid":"97","code":":asuka:","img":"asuka.png?1","width":"25","height":"30","roles":[2],"private":false},{"sid":"98","code":":konata:","img":"konata.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"99","code":":reimu:","img":"reimu.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"100","code":":sex:","img":"sex.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"101","code":":mimo:","img":"mimo.png?1","width":"23","height":"33","roles":[2],"private":false},{"sid":"102","code":":fire:","img":"fire.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"103","code":":mandarin:","img":"mandarin.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"104","code":":grafon:","img":"grafon.png?1","width":"23","height":"30","roles":[2],"private":false},{"sid":"105","code":":epeka:","img":"epeka.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"106","code":":opeka:","img":"opeka.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"107","code":":ocry:","img":"ocry.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"108","code":":neponi:","img":"neponi.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"109","code":":moon:","img":"moon.png?1","width":"23","height":"30","roles":[2],"private":false},{"sid":"110","code":":ghost:","img":"gay.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"111","code":":omsk:","img":"omsk.png?2","width":"30","height":"30","roles":[2],"private":false},{"sid":"112","code":":grumpy:","img":"grumpy.png?2","width":"30","height":"30","roles":[2],"private":false},{"sid":"113","code":":bobr:","img":"bobr.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"118","code":":yeah:","img":"yeah.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"122","code":":probe:","img":"probe.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"123","code":":ling:","img":"ling.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"124","code":":marine:","img":"marine.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"125","code":":mvp:","img":"mvp.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"135","code":":bin:","img":"bin.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"136","code":":kim:","img":"kim.png?1","width":"25","height":"30","roles":[2],"private":false},{"sid":"137","code":":kot:","img":"kot.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"138","code":":sm1:","img":"sm1.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"139","code":":warn:","img":"warn.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"140","code":":trash:","img":"trash.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"141","code":":blue:","img":"blue.png?1","width":"32","height":"30","roles":[2],"private":false},{"sid":"142","code":":gold:","img":"gold.png?1","width":"32","height":"30","roles":[2],"private":false},{"sid":"143","code":":grey:","img":"grey.png?1","width":"32","height":"30","roles":[2],"private":false},{"sid":"144","code":":purp:","img":"purp.png?1","width":"32","height":"30","roles":[2],"private":false},{"sid":"145","code":":red:","img":"red.png?1","width":"32","height":"30","roles":[2],"private":false},{"sid":"146","code":":daaa:","img":"daaa.png?1","width":"33","height":"30","roles":[2],"private":false},{"sid":"147","code":":gg:","img":"gg.png?1","width":"51","height":"27","roles":[2],"private":false},{"sid":"148","code":":op:","img":"op.png?1","width":"49","height":"27","roles":[2],"private":false},{"sid":"166","code":":666:","img":"666.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"167","code":":bear:","img":"bear.png?1","width":"32","height":"30","roles":[2],"private":false},{"sid":"169","code":":drone:","img":"drone.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"171","code":":lgun:","img":"lgun.png?1","width":"30","height":"24","roles":[2],"private":false},{"sid":"172","code":":lknife:","img":"lknife.png?1","width":"30","height":"15","roles":[2],"private":false},{"sid":"173","code":":mule:","img":"mule.png?1","width":"29","height":"30","roles":[2],"private":false},{"sid":"174","code":":no:","img":"no.png?1","width":"30","height":"31","roles":[2],"private":false},{"sid":"175","code":":ploho:","img":"ploho.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"176","code":":pushka:","img":"pushka.png?1","width":"46","height":"30","roles":[2],"private":false},{"sid":"177","code":":rgun:","img":"rgun.png?1","width":"30","height":"24","roles":[2],"private":false},{"sid":"178","code":":rknife:","img":"rknife.png?1","width":"30","height":"15","roles":[2],"private":false},{"sid":"179","code":":support:","img":"support.png?1","width":"24","height":"30","roles":[2],"private":false},{"sid":"180","code":":plasma:","img":"plasma.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"181","code":":ff:","img":"ff.png?1","width":"30","height":"30","roles":[2],"private":false},{"sid":"182","code":":rage:","img":"rage.png?1","width":"28","height":"30","roles":[2],"private":false},{"sid":"114","code":":kingalf:","img":"alfi-crown.png?v=1","width":"30","height":"30","roles":[16,17],"private":true},{"sid":"115","code":":mofgod:","img":"mother-of-the-god.png?v=1","width":"30","height":"30","roles":[17],"private":true},{"sid":"116","code":":prime:","img":"fredy18.png?v=1","width":"33","height":"35","roles":[18],"private":true},{"sid":"117","code":":pekaking:","img":"pekaking.png?v=1","width":"32","height":"35","roles":[18,19,22,27],"private":true},{"sid":"120","code":":ilied:","img":"ilied.png?1","width":"30","height":"30","roles":[2,10,16,17,18,19,21,22,27],"private":true},{"sid":"121","code":":coupeka:","img":"coupeka.png?1","width":"30","height":"30","roles":[10,16,17,18,19,21,22,27],"private":true},{"sid":"126","code":":gogo:","img":"gogo.png?1","width":"30","height":"30","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"127","code":":pekling:","img":"pekling.png?1","width":"30","height":"30","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"128","code":":zeal:","img":"zeal.png?1","width":"30","height":"26","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"129","code":":infe:","img":"infe.png?1","width":"30","height":"26","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"130","code":":cheese:","img":"cheese.png?1","width":"30","height":"30","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"131","code":":dark:","img":"dark.png?1","width":"30","height":"30","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"132","code":":reaper:","img":"reaper.png?1","width":"41","height":"30","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"133","code":":maro:","img":"maro.png?1","width":"43","height":"30","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"134","code":":butth:","img":"butth.png?1","width":"30","height":"30","roles":[3,5,6,7,9,10,14,16,17,18,19,21,22,27],"private":true},{"sid":"149","code":":pri21:","img":"pri21.png?1","width":"30","height":"30","roles":[22,27],"private":true},{"sid":"168","code":":daya:","img":"daya.png?1","width":"30","height":"30","roles":[22,27],"private":true},{"sid":"151","code":":ggwp:","img":"ggwp.png?1","width":"83","height":"25","roles":[22,27],"private":true},{"sid":"152","code":":imbaimba:","img":"imbaimba.png?1","width":"69","height":"27","roles":[22,27],"private":true},{"sid":"153","code":":kid:","img":"kid.png?1","width":"30","height":"30","roles":[22,27],"private":true},{"sid":"154","code":":num1:","img":"num1.png?1","width":"30","height":"30","roles":[22,27],"private":true},{"sid":"155","code":":poker:","img":"poker.png?1","width":"28","height":"30","roles":[22,27],"private":true},{"sid":"156","code":":povar:","img":"povar.png?1","width":"30","height":"30","roles":[22,27],"private":true},{"sid":"157","code":":vuvu:","img":"vuvu.png?1","width":"29","height":"27","roles":[22,27],"private":true},{"sid":"158","code":":angryling:","img":"angryling.png?1","width":"30","height":"30","roles":[27],"private":true},{"sid":"159","code":":casterling:","img":"casterling.png?1","width":"31","height":"30","roles":[27],"private":true},{"sid":"160","code":":kawailing:","img":"kawailing.png","width":"29","height":"30","roles":[27],"private":true},{"sid":"161","code":":nelson:","img":"nelson.png","width":"39","height":"30","roles":[27],"private":true},{"sid":"162","code":":richpeka:","img":"richpeka.png?1","width":"30","height":"30","roles":[27],"private":true},{"sid":"163","code":":uprls:","img":"uprls.png?1","width":"30","height":"30","roles":[27],"private":true},{"sid":"164","code":":vsem:","img":"vsem.png?1","width":"30","height":"30","roles":[27],"private":true},{"sid":"165","code":":wat:","img":"wat.png?1","width":"30","height":"30","roles":[27],"private":true}];

var CHAT_IMG_DIR = '/img/';
var smilesCount = smiles.length;

var smileHtmlReplacement = [];
for( i = 0; i < smilesCount; i++ ) {
	smileHtmlReplacement[ i ] =
		'<img src="' + CHAT_IMG_DIR + smiles[ i ].img +
		'" width="' + smiles[ i ].width +
		'" height="' + smiles[ i ].height +
		'" class="chat-smile"/>';
}